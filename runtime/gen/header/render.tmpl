package render_runtime

// Code generated by runtime/gen. DO NOT EDIT.


import (
	"fmt"
	"image"
	"sync"

	"github.com/mitchellh/hashstructure/v2"
	"go.starlark.net/starlark"
	"go.starlark.net/starlarkstruct"

	"tidbyt.dev/pixlet/render"
)

type RenderModule struct {
	once   sync.Once
	module starlark.StringDict
}

var renderModule = RenderModule{}

func LoadRenderModule() (starlark.StringDict, error) {
	var err error

	renderModule.once.Do(func() {
		var fontList []string
		if fontList, err = render.GetFontList(); err != nil {
			return
		}
		fnt := starlark.NewDict(len(fontList))
		for _, name := range fontList {
			fnt.SetKey(starlark.String(name), starlark.String(name))
		}
		fnt.Freeze()

		renderModule.module = starlark.StringDict{
			"render": &starlarkstruct.Module{
				Name: "render",
				Members: starlark.StringDict{
					"fonts":    fnt,
{{range .}}
					"{{.GoName}}":  starlark.NewBuiltin("{{.GoName}}", new{{.GoName}}),
{{end}}
				},
			},
			"canvas": &starlarkstruct.Module{
				Name: "canvas",
				Members: starlark.StringDict{
					"width":  starlark.NewBuiltin("width", dimension(dimensionWidth)),
					"height": starlark.NewBuiltin("height", dimension(dimensionHeight)),
				},
			},
		}
	})

	return renderModule.module, err
}

type Rootable interface {
	AsRenderRoot() render.Root
}

type Widget interface {
	AsRenderWidget() render.Widget
}
